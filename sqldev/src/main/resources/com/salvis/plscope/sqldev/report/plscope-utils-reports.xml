<?xml version="1.0" encoding="UTF-8" ?>
<displays>
<folder>
	<name><![CDATA[plscope-utils Reports]]></name>
	<tooltip><![CDATA[PL/Scope reports]]></tooltip>
	<description><![CDATA[PL/Scope based reports maintained in https://github.com/PhilippSalvisberg/plscope-utils ]]></description>
		<display id="1dc49f53-015d-1000-8001-c0a8011251fe" type="" style="Table" enable="true">
		<name><![CDATA[Duplicate SQL Statements]]></name>
		<description><![CDATA[Reports duplicate static SQL statements with packages, procedures, functions, triggers and types. ]]></description>
		<tooltip><![CDATA[Reports duplicate static SQL statements]]></tooltip>
		<drillclass><![CDATA[]]></drillclass>
		<CustomValues>
			<TYPE><![CDATA[horizontal]]></TYPE>
		</CustomValues>
		<query minversion="12.2">
			<sql><![CDATA[WITH
   stmt AS (
      SELECT owner,
             object_type,
             object_name,
             type,
             line, 
             col, 
             sql_id,
             CASE 
                WHEN (count(sql_id) OVER (PARTITION BY sql_id)) > 1 THEN 
                   'YES'
                ELSE 
                   'NO' 
             END AS is_duplicate,
             full_text
        FROM sys.all_statements
       WHERE owner = NVL(:OBJECT_OWNER, USER)
   )
SELECT owner AS "Owner",
       object_type AS "Object type",
       object_name AS "Object name",
       CASE
          WHEN object_type IN ('FUNCTION', 'PACKAGE', 'PACKAGE BODY', 'PROCEDURE', 'TRIGGER', 'TYPE', 'TYPE BODY') THEN
             'SQLDEV:LINK:' || owner || ':' || object_type || ':' || object_name || ':' ||
                to_char(line,'FM0000009') || ':' || to_char(col,'FM0000009') || ':' || type ||
                ':oracle.dbtools.raptor.controls.grid.DefaultDrillLink'
          ELSE
             type
       END AS "Type",
       line AS "Line", 
       col AS "Col", 
       sql_id AS "SQL_ID",
       full_text AS "Text"
  FROM stmt
 WHERE is_duplicate = 'YES'
 ORDER BY owner, object_type, object_name, sql_id, line, col]]></sql>
			<binds>
				<bind id="OBJECT_OWNER">
					<prompt><![CDATA[Owner]]></prompt>
					<tooltip><![CDATA[OBJECT_OWNER]]></tooltip>
					<value><![CDATA[NULL_VALUE]]></value>
					<bracket><![CDATA[null]]></bracket>
				</bind>
			</binds>
		</query>
	</display>
</folder>
</displays>